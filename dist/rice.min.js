"use strict";function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.prototype.mapping=function(e,r){if("string"==typeof e){var e=e.split("."),t=this;if(r){e.reverse();for(var i=_defineProperty({},e[0],r),n=1;n<e.length-1;n++)i=_defineProperty({},e[n],i);t[e[e.length-1]]=i}else for(var o=0;o<e.length;o++)t=t[e[o]];return t}return this};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};String.prototype.replaceRecursive=function(e,r){var t=this;return t.replace(new RegExp(e,"g"),r)},String.prototype.replaceAll=function(e,r){var t=this;if(Array.isArray(e)){for(var i in e)t=t.replaceRecursive(e[i],r);return t}if("object"==("undefined"==typeof e?"undefined":_typeof(e))){for(var i in e)t=t.replaceRecursive(i,e[i]);return t}return t.replaceRecursive(i,e[i])},String.prototype.replaceVar=function(e,r,t){var i=this;if(t||(t="%"),Array.isArray(e)){for(var n in e)i=i.replaceAll(t+e[n]+t,r);return i}if("object"==("undefined"==typeof e?"undefined":_typeof(e))){for(var n in e)i=i.replaceAll(t+n+t,e[n]);return i}return i.replaceAll(t+n+t,e[n])};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RiceData={_:{services:{},servicesLoaded:{},globals:{},cache:{},constructors:[],controllers:{},config:{test:{ok:!0}}}},Rice=function(){var e=this,r={service:{},controller:{}};return r.name="Rice!",r.addConstructor=function(e){RiceData._.constructors.push(e)},r.init=function(){for(var e in RiceData._.constructors){var t=RiceData._.constructors[e].call(r);t&&(r=t)}return r},r.addConfig=function(e,r){function t(e,r){return RiceData._.config.mapping(e)?console.error('There is already an item named "'+e+'" in config. To update this item use setConfig ()'):void RiceData._.config.mapping(e,r)}if("object"==("undefined"==typeof e?"undefined":_typeof(e)))for(var i in e)t(i,e[i]);else t(e,r)},r.setConfig=function(e,r){function t(e,r){RiceData._.config.mapping(e,r)}if("object"==("undefined"==typeof e?"undefined":_typeof(e)))for(var i in e)t(i,e[i]);else t(e,r)},r.getConfig=function(e){return RiceData._.config.mapping(e)},r.add=function(e,t){return r[e]?console.error('"Rice.'+Name+'" was not created. A key with this name already exists.'):(r[e]=t,r)},r.cache=function(e,r){return r?void(RiceData._.cache[e]=r):RiceData._.cache[e]?RiceData._.cache[e]:void 0},r.global=function(e,r){return r?void(RiceData._.globals[e]=r):RiceData._.globals[e]?RiceData._.globals[e]:void 0},r.addService=function(e,r){return RiceData._.services[e]?console.error('Can not create the "'+e+'" service. Another service with this name already exists'):void(RiceData._.services[e]=r)},r.initService=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return RiceData._.services[e]?(r.service[e]=RiceData._.services[e].apply(r,i),void(r.service[e].init&&r.service[e].init())):console.error('There is no registered service called "'+e+'"')},r.initAllServices=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var i in RiceData._.services){var n=[i];t[i]&&(Array.isArray(t[i])?t[i].map(function(e){n.push(t[e])}):n.push(t[i])),r.initService.apply(e,n)}},r.stopService=function(e){r.service[e]&&(r.service[e].stop?r.service[e].stop(function(){delete r.service[e]}):delete r.service[e],delete RiceData._.services[e])},r.stopAllServices=function(e){for(var t in r.service)r.stopService(t)},r.addController=function(e,r){RiceData._.controllers[e]=r},r.controller=function(e){try{for(var t=RiceData._.controllers[e],i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.apply(r,n)}catch(r){if(!RiceData._.controllers[e])return console.error('The controller "'+e+'" has not been registered. Use Rice.addController("'+e+'", function(){...}) to register it.');console.error(r)}},r}();